webpackJsonp([2],{"3e2i":function(e,r){},IX92:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=s("zL8q"),t={data:function(){var e=this;return{errorInfo:!1,errInfo:"",form:{old_password:"",new_password:"",checkpassword:""},rules:{old_password:[{required:!0,message:"请输入旧的密码!",trigger:"blur"}],new_password:[{required:!0,message:"请输入新的密码!",trigger:"blur"},{validator:function(e,r,s){0===r.indexOf("_")?s(new Error("密码不得以下划线开头")):s()},trigger:"change"},{pattern:/^[a-zA-Z0-9][_a-zA-Z0-9]*$/,message:"密码必须由字母、数字或下划线组成"},{min:6,max:20,message:"长度在6-20位之间",trigger:"blur"}],checkpassword:[{validator:function(r,s,o){""===s?o(new Error("请再次输入密码")):s!==e.form.new_password?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]}}},methods:{modifyPassword:function(e){var r=this;r.errorInfo=!1,r.errInfo="",r.$refs[e].validate(function(e){if(e){var s=sessionStorage.getItem("studentID");console.log(s);var t={studentID:s,old_password:r.form.old_password,new_password:r.form.new_password};r.$axios.post("/api/user_function/modifyPassword",t).then(function(e){0===e.data.state?(r.errorInfo=!0,r.errInfo="旧密码不正确"):1===e.data.state&&(Object(o.Message)({message:"成功修改密码",type:"success",center:!0}),r.errorInfo=!1,r.errInfo="",r.resetForm("form"))}).catch(function(e){console.log(e),Object(o.Message)({message:"请检查网络并重试",type:"error",center:!0})})}})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){document.getElementById("p").style.height=window.innerHeight-110+"px"}},a={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"page",attrs:{id:"p"}},[s("el-header",[s("h1",{staticClass:"head"},[e._v("修改密码")])]),e._v(" "),s("div",{staticClass:"login-wrap"},[s("div",{staticClass:"ms-forget"},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[e.errorInfo?s("div",{staticClass:"errdiv"},[s("span",[e._v(e._s(e.errInfo))])]):e._e(),e._v(" "),s("el-form-item",{attrs:{prop:"old_password"}},[s("el-input",{attrs:{type:"password",placeholder:"旧的密码"},model:{value:e.form.old_password,callback:function(r){e.$set(e.form,"old_password",r)},expression:"form.old_password"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"new_password"}},[s("el-input",{attrs:{type:"password",placeholder:"新的密码"},model:{value:e.form.new_password,callback:function(r){e.$set(e.form,"new_password",r)},expression:"form.new_password"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"checkpassword"}},[s("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.form.checkpassword,callback:function(r){e.$set(e.form,"checkpassword",r)},expression:"form.checkpassword"}})],1),e._v(" "),s("div",{staticClass:"login-btn1"},[s("el-button",{attrs:{type:"primary"},on:{click:function(r){e.modifyPassword("form")}}},[e._v("确认修改")])],1)],1)],1)])],1)},staticRenderFns:[]};var n=s("VU/8")(t,a,!1,function(e){s("iJI7"),s("3e2i")},"data-v-3e17698a",null);r.default=n.exports},iJI7:function(e,r){}});
//# sourceMappingURL=2.2ad07a7214ea68cabd58.js.map